(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),o=n(7),r=n.n(o),i=(n(16),n(10)),l=n(2),u=n.p+"static/media/logo.c2821b38.svg";var p=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0447\u0438\u043a",className:"header__logo"})})},d=n(6),m=s.a.createContext();var j=function(e){var t=e.props,n=s.a.useContext(m),c=t.owner._id===n._id,o="element__trash-button ".concat(c?"element__trash-button_visible":"element__trash-button_hidden"),r=t.likes.some((function(e){return e._id===n._id})),i="element__like-icon ".concat(r?"element__like-icon_active":"element__like-icon_hidden");return Object(a.jsxs)("li",{className:"element",children:[Object(a.jsx)("div",{className:"element__container",children:Object(a.jsx)("img",{src:t.link,alt:t.name,className:"element__photo",onClick:function(){return t.onCardClick(t)}})}),Object(a.jsx)("button",{className:o,onClick:function(){return t.onCardDelete(t)}}),Object(a.jsxs)("div",{className:"element__info",children:[Object(a.jsx)("span",{className:"element__title",children:t.name}),Object(a.jsxs)("div",{className:"element__like-button",onClick:function(){return t.onCardLike(Object(d.a)(Object(d.a)({},t),{},{currentUserId:n._id}))},children:[Object(a.jsx)("button",{className:i}),Object(a.jsx)("span",{className:"element__like-counter",children:t.likes.length})]})]})]})};var h=function(e){var t=e.onEditProfile,n=e.onAddCard,c=e.onEditAvatar,o=(e.onCardClick,e.cards),r=s.a.useContext(m);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__profile-info",children:[Object(a.jsx)("a",{href:"/#",className:"profile__avatar-box",onClick:c,children:Object(a.jsx)("img",{src:r.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u0447\u0443\u0432\u0430\u043a\u0430",className:"profile__avatar"})}),Object(a.jsxs)("div",{className:"profile__text",children:[Object(a.jsxs)("div",{className:"profile__name",children:[Object(a.jsx)("h1",{className:"profile__title",children:r.name}),Object(a.jsx)("button",{type:"button",className:"profile__edit-button","aria-label":"Edit",onClick:t})]}),Object(a.jsx)("p",{className:"profile__subtitle",children:r.about})]})]}),Object(a.jsx)("button",{type:"button",className:"profile__add-button","aria-label":"Add",onClick:n})]}),Object(a.jsx)("section",{className:"elements",children:Object(a.jsx)("ul",{className:"elements__list",children:o.map((function(e){return Object(a.jsx)(j,{props:e},e._id)}))})})]})};var b=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},f=n.p+"static/media/close-button.b76af81b.svg";var _=function(e){var t=e.formName,n=e.btnName;return Object(a.jsx)("button",{className:"popup__save-button popup__save-button_".concat(t),children:n})};var O=function(e){return Object(a.jsx)("section",{className:"popup popup_".concat(e.name," ").concat(e.isOpen&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{className:"popup__close-button",onClick:e.onClose,children:Object(a.jsx)("img",{src:f,alt:"\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"})}),Object(a.jsx)("h3",{className:"popup__title",children:e.title}),Object(a.jsxs)("form",{className:"popup__form",onSubmit:e.onSubmit,children:[e.children,Object(a.jsx)(_,{formName:e.formName,btnName:e.btnName})]})]})})};var v=function(e){return Object(a.jsx)("section",{className:"popup popup_img ".concat(e.isOpen&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container popup__container_img",children:[Object(a.jsxs)("div",{className:"popup__img",children:[Object(a.jsx)("button",{className:"popup__close-button popup__close-button_img",onClick:e.onClose,children:Object(a.jsx)("img",{src:f,alt:"\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"})}),Object(a.jsx)("img",{src:e.props.link,alt:e.props.name,className:"popup__pic"})]}),Object(a.jsx)("span",{className:"popup__text",children:e.props.name})]})})};var x=function(e){var t=e.type,n=e.name,c=e.count,s=e.placeholder,o=e.minLength,r=e.maxLength,i=e.onChange,l=e.value;return Object(a.jsx)("input",{type:t,className:"popup__input popup__input_".concat(n),id:"popup__input_".concat(n,"_").concat(c),onChange:i,placeholder:s,minLength:o,maxLength:r,required:!0,value:l})};var N=function(e){var t=e.name,n=e.count;return Object(a.jsx)("span",{className:"popup__error",id:"popup__input_".concat(t,"_").concat(n,"-error")})};var g=function(e){var t=s.a.useContext(m),n=s.a.useState(t.name),c=Object(l.a)(n,2),o=c[0],r=c[1],i=s.a.useState(t.about),u=Object(l.a)(i,2),p=u[0],d=u[1];return s.a.useEffect((function(){r(t.name),d(t.about)}),[t]),Object(a.jsxs)(O,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",name:"edit",isOpen:e.isOpen,onClose:e.onClose,formName:"edit",btnName:"\u041e\u043a, \u044f \u043f\u043e\u043d\u044f\u043b :\u0437",onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:p})},children:[Object(a.jsxs)("label",{className:"popup__label",children:[Object(a.jsx)(x,{type:"text",name:"name",count:"2",placeholder:"\u0422\u044b \u043a\u0442\u043e \u0442\u0430\u043a\u043e\u0439?",minLength:"2",maxLength:"30",onChange:function(e){r(e.target.value)},value:o||""}),Object(a.jsx)(N,{name:"name",count:"2"})]}),Object(a.jsxs)("label",{className:"popup__label",children:[Object(a.jsx)(x,{type:"text",name:"info",count:"2",placeholder:"\u0427\u0435 \u043a\u043e\u0433\u043e, \u0441\u0443***\u044b?",minLength:"2",maxLength:"300",onChange:function(e){d(e.target.value)},value:p||""}),Object(a.jsx)(N,{name:"info",count:"2"})]})]})};var C=function(e){var t=s.a.useRef(null);return Object(a.jsx)(O,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:e.isOpen,onClose:e.onClose,formName:"avatar",btnName:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar(t.current.value),t.current.value=""},children:Object(a.jsxs)("label",{className:"popup__label",children:[Object(a.jsx)("input",{type:"url",className:"popup__input popup__input_avatar",name:"info",count:"1",placeholder:"\u0427\u0435 \u0441\u043d\u043e\u0432\u0430 \u0432\u044b\u043f\u0435\u043d\u0434\u0440\u0438\u0432\u0430\u0435\u0448\u044c\u0441\u044f \u0441 \u0430\u0444\u0444\u043a\u0430\u043c\u0438?",ref:t,src:e.link}),Object(a.jsx)(N,{name:"info",count:"1"})]})})};var k=function(e){var t=s.a.useState(""),n=Object(l.a)(t,2),c=n[0],o=n[1],r=s.a.useState(""),i=Object(l.a)(r,2),u=i[0],p=i[1];return Object(a.jsxs)(O,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",name:"add",isOpen:e.isOpen,onClose:e.onClose,formName:"add",btnName:"\u041f\u043e\u0433\u043d\u0430\u043b\u0438!",onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c,link:u})},children:[Object(a.jsxs)("label",{className:"popup__label",children:[Object(a.jsx)(x,{type:"text",name:"name",count:"1",placeholder:"\u0427\u0435 \u0437\u0430 \u043f\u0440\u043e\u0435\u043a\u0442?",minLength:"2",maxLength:"30",onChange:function(e){var t=e.target.value;o(t)},value:c}),Object(a.jsx)(N,{name:"name",count:"1"})]}),Object(a.jsxs)("label",{className:"popup__label",children:[Object(a.jsx)(x,{type:"url",name:"info",count:"1",placeholder:"\u0421\u0441\u044b\u043b\u043e\u0447\u043a\u0443 \u043f\u043e\u0434\u043a\u0438\u043d\u044c, \u0431\u0440\u043e!",onChange:function(e){var t=e.target.value;p(t)},value:u}),Object(a.jsx)(N,{name:"info",count:"1"})]})]})},y=n(8),S=n(9),L=new(function(){function e(t){var n=t.url,a=t.headers;Object(y.a)(this,e),this.url=n,this.headers=a}return Object(S.a)(e,[{key:"getReply",value:function(e){return e.ok?e.json():Promise.reject("Server error")}},{key:"getPersonalInfo",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers}).then(this.getReply)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then(this.getReply)}},{key:"createCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:n})}).then(this.getReply)}},{key:"deleteCard",value:function(e){var t=e.name,n=e.id;return fetch("".concat(this.url,"/cards/").concat(n),{method:"DELETE",headers:this.headers,body:JSON.stringify({name:t})}).then(this.getReply)}},{key:"setPersonalInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:n})}).then(this.getReply)}},{key:"setAvatarInfo",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then(this.getReply)}},{key:"checkLikes",value:function(e,t){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this.headers}).then(this.getReply)}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{"Content-Type":"application/json",authorization:"d4a20ab5-6a24-4061-8e1d-6f5e8bc9d229"}});var P=function(){var e=s.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=s.a.useState(!1),r=Object(l.a)(o,2),u=r[0],d=r[1],j=s.a.useState(!1),f=Object(l.a)(j,2),_=f[0],x=f[1],N=s.a.useState({}),y=Object(l.a)(N,2),S=y[0],P=y[1],E=s.a.useState(!1),A=Object(l.a)(E,2),I=A[0],R=A[1],T=s.a.useState({}),U=Object(l.a)(T,2),D=U[0],w=U[1],J=s.a.useState([]),F=Object(l.a)(J,2),B=F[0],H=F[1];function M(e){P(e)}function q(){R(!I)}function z(){c(!1),d(!1),x(!1),P({}),R(!1)}function G(e){return{name:e.name,link:e.link,onCardClick:M,onCardLike:K,_id:e._id,onCardOpen:q,owner:e.owner,likes:e.likes,onCardDelete:Q}}function K(e){var t=e.likes.some((function(t){return t._id===e.currentUserId}));L.checkLikes(e._id,!t).then((function(){L.getInitialCards().then((function(e){var t=e.map(G);H(t)}))}))}function Q(e){var t=e.name,n=e._id;L.deleteCard({name:t,id:n}).then((function(){var e=B.filter((function(e){return e._id!==n}));H(e)}))}return s.a.useEffect((function(){L.getPersonalInfo().then((function(e){w(e)})).catch((function(e){return alert(e)}))}),[]),s.a.useEffect((function(){L.getInitialCards().then((function(e){var t=e.map(G);H(t)})).catch((function(e){return alert(e)}))}),[]),Object(a.jsx)(m.Provider,{value:D,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(p,{}),Object(a.jsx)(h,{cards:B,onEditProfile:function(){c(!n)},onAddCard:function(){d(!u)},onEditAvatar:function(){x(!_)},onCardClick:M,isOpen:q}),Object(a.jsx)(k,{isOpen:u,onClose:z,onAddPlace:function(e){L.createCard(e).then((function(e){H([e].concat(Object(i.a)(B)).map(G)),z()}))}}),Object(a.jsx)(g,{isOpen:n,onClose:z,onUpdateUser:function(e){L.setPersonalInfo(e).then((function(e){w(e),z()})).catch((function(e){return alert(e)}))}}),Object(a.jsx)(C,{isOpen:_,onClose:z,onUpdateAvatar:function(e){L.setAvatarInfo({avatar:e}).then((function(e){w(e),z()}))}}),Object(a.jsx)(O,{title:"\u0422\u044b \u0431\u0435\u0441\u0441\u0435\u0440\u0434\u0435\u0447\u043d\u044b\u0439! \u0422\u043e\u0447\u043d\u043e \u0443\u0434\u0430\u043b\u044f\u0435\u043c?",name:"confirm",formname:"confirm",btnname:"\u0414\u044d\u044d\u044d"}),Object(a.jsx)(v,{isOpen:Object.keys(S).length,props:S,onClose:z}),Object(a.jsx)(b,{})]})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(P,{})}),document.getElementById("root")),E()}},[[17,1,2]]]);
//# sourceMappingURL=main.ce49f142.chunk.js.map